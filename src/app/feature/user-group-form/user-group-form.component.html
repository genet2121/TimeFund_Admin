
<div class="p-8 max-w-4xl mx-auto bg-white shadow-lg rounded-lg border border-gray-200" [formGroup]="userGroupForm">
  <button class="flex items-center space-x-2 mb-3 hover:underline" (click)="onBack()">
    <mat-icon>arrow_back</mat-icon>
    <span class="text-base font-medium">Back</span>
  </button>

  <h2 class="text-lg font-semibold text-gray-700 mb-6">Create User Groups</h2>

  <!-- Group Name Dropdown -->
  <mat-form-field appearance="outline" class="w-full sm:w-80 mb-6 custom-border">
    <mat-select placeholder="Group Name" formControlName="user_group_id">
      <mat-option *ngFor="let group of groups" [value]="group.user_group_id">
        {{ group.user_group_name }}
      </mat-option>
    </mat-select>
  </mat-form-field>

  <!-- Permissions Table -->
  <div class="overflow-y-auto max-h-96 mb-6">
    <table class="min-w-full divide-y divide-gray-300">
      <thead class="bg-gray-100">
        <tr>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-600 uppercase">Pages</th>
          <th class="px-4 py-3 text-center text-xs font-medium text-gray-600 uppercase">View</th>
          <th class="px-4 py-3 text-center text-xs font-medium text-gray-600 uppercase">Add</th>
          <th class="px-4 py-3 text-center text-xs font-medium text-gray-600 uppercase">View Detail</th>
          <th class="px-4 py-3 text-center text-xs font-medium text-gray-600 uppercase">Update</th>
          <th class="px-4 py-3 text-center text-xs font-medium text-gray-600 uppercase">Delete</th>
        </tr>
      </thead>
      <tbody formArrayName="permissions" class="divide-y divide-gray-200 ">
        <tr *ngFor="let permission of permissionsArray.controls; let i = index" [formGroupName]="i">
          <td class="px-6 py-4 text-sm text-gray-700">
            {{ getTableName(permission.get('table_id')?.value) }}
          </td>
          <td class="px-4 py-4 text-center">
            <mat-checkbox color="primary" formControlName="can_view"></mat-checkbox>
          </td>
          <td class="px-4 py-4 text-center">
            <mat-checkbox color="primary" formControlName="can_add"></mat-checkbox>
          </td>
          <td class="px-4 py-4 text-center">
            <mat-checkbox color="primary" formControlName="can_view_detail"></mat-checkbox>
          </td>
          <td class="px-4 py-4 text-center">
            <mat-checkbox color="primary" formControlName="can_update"></mat-checkbox>
          </td>
          <td class="px-4 py-4 text-center">
            <mat-checkbox color="primary" formControlName="can_delete"></mat-checkbox>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Submit Button -->
  <div class="flex justify-end">
    <button mat-raised-button color="primary" class="bg-purple-600 text-white hover:bg-purple-700 transition-colors py-2 px-6 rounded-md" (click)="onSubmit()">
      Create Group
    </button>
  </div>
</div>
